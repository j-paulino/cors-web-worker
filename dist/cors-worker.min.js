!function(){"use strict";function request(verb){return function(url){var promise=new Promise(function(resolve,reject){var request=new XMLHttpRequest;request.open(verb,url),request.send(),request.onload=function(){this.status>=200&&this.status<305?resolve(this.responseText):reject(this.statusText)},request.onerror=function(){reject(this.statusText)}});return promise}}var http={get:request("get")};window.http=http}(),function(){"use strict";function CORSWorker(url,scriptsToImport,dontFetchImmediately){var self=this;scriptsToImport=scriptsToImport||[],this.url=url,this.__msgQueue=[],this.__eventsQueue=[],buildImportList(self,scriptsToImport).then(function(blobImportStr){dontFetchImmediately||self.fetch(blobImportStr)})}function createBlobFromJSFile(url){return http.get(url).then(function(resText){var blob=new Blob([resText],{type:"application/javascript"});return window.URL.createObjectURL(blob)})}function buildImportList(CORSWorker,urlList){var importListPromises=[];return urlList.forEach(function(url){url&&importListPromises.push(createBlobFromJSFile(url))}),Promise.all(importListPromises).then(function(values){return CORSWorker.blobUrls=values,getImportString(values)})}function getImportString(blobUrlList){var buffer=[],windowSelf="window = self;\n";return blobUrlList.forEach(function(url){buffer.push('"'+url+'"')}),buffer.length?windowSelf+"importScripts("+buffer.join(",")+");\n":""}function processQueues(foreignWorker){var msgArgs,i,msgQueueLen=foreignWorker.__msgQueue.length,worker=foreignWorker.worker;for("function"==typeof foreignWorker.onmessage&&(worker.onmessage=foreignWorker.onmessage),"function"==typeof foreignWorker.onerror&&(worker.onerror=foreignWorker.onerror),foreignWorker.__eventsQueue.forEach(function(eventArgs){worker.addEventListener.apply(foreignWorker.worker,eventArgs)}),i=0;msgQueueLen>i;i++){if(msgArgs=foreignWorker.__msgQueue[i],"__terminate__"===msgArgs){worker.terminate();break}worker.postMessage.apply(foreignWorker.worker,msgArgs)}foreignWorker.__msgQueue=null,foreignWorker.__eventsQueue=null}function removeFileImports(rawText,imports){return imports.forEach(function(importItem){rawText=rawText.replace(importItem,"")}),rawText}function cleanUpFileImports(imports){return imports.map(function(importItem){return importItem.replace("importScripts","").replace("(","").replace(")","").replace(new RegExp("'","g"),"")}).join(",").split(",")}CORSWorker.prototype.fetch=function(blobImportStr){var importStrings,imports,self=this,blobImportStr=blobImportStr||"";return http.get(this.url).then(function(resText){var workerText,blob;return importStrings=resText.match(/importScripts\(([^)]+)\)/g)||[],resText=removeFileImports(resText,importStrings),imports=cleanUpFileImports(importStrings),workerText=blobImportStr+resText,buildImportList(self,imports).then(function(importStr){return workerText=importStr+workerText,blob=new Blob([workerText],{type:"application/javascript"}),self.worker=new Worker(window.URL.createObjectURL(blob)),processQueues(self),self.worker})})},CORSWorker.prototype.postMessage=function(){this.worker?this.worker.postMessage.apply(this.worker,arguments):this.__msgQueue.push(arguments)},CORSWorker.prototype.addEventListener=function(){this.worker?this.worker.addEventListener.apply(this.worker,arguments):this.__eventsQueue.push(arguments)},CORSWorker.prototype.terminate=function(){this.worker?this.worker.terminate():this.__msgQueue.push("__terminate__")},window.CORSWorker=CORSWorker}();